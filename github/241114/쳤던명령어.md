# 1. 기본 branch 생성 및 합병
* 가지처럼 새로운 작업을 시작하고, 완료된 작업을 기존 작업에 합병할 수 있습니다.
* 협업을 할 때 여러 사람이 동시에 작업할 수 있도록 하기 위해 사용합니다.
* 기본 branch는 main이다. 예전에는 master였으나, 최근에는 main으로 변경되었습니다.
* 처음에 init을 하게 되면 main branch가 생성되지 않습니다. commit을 하게 되면 main branch가 생성됩니다.
* 개별적인 작업 공간을 만든다는 의미는 이전 main에서 파일과 폴더를 복사(실제로는 복사해오는 것은 아니고 수정 내역만 파악하는 것입니다)해오고, 여기서 작업을 한 것이 다른 branch에 영향을 주지 않는다는 것입니다.

## 1.1 실습
```
# 저는 이곳에서 작업하고 Ctrl + C, Shift + Insert로 붙여넣기를 하겠습니다.
# 나중에 실습한 폴더는 삭제하겠습니다.
mkdir branch
cd branch
git init

# main branch 생성
# window powershell: echo "main" > README.md
# git bash, mac, linux: touch README.md
touch README.md
echo "main" > README.md
git add .
git commit -m '1'

# branch 확인 및 생성
git branch
git branch a
git checkout a
echo "a" > a.txt

# 다른 브렌치에서 확인
# 1. 
git checkout main
# a.txt가 있음 확인: a branch에서 사용한 명령어는 다른 브랜치에서도 사용한 명령어와 같습니다. commit해야 반영되는 것입니다.
git checkout a
git add .
ls

# 2.
git checkout main
# a.txt가 있음 확인
git checkout a
git commit -m '2'
ls

# 3.
git checkout main
# a.txt가 없음 확인: 한 번 commit이 일어난 지점부터는 다른 branch에서 작업한 내용이 반영되지 않습니다.
git checkout a
ls

# branch 합병
# 합병이 될 branch로 이동
git checkout main
ls
git merge a
ls
git granch
# a가 살아 있습니다. 그런데 이미 코드가 합쳐졌으므로 삭제해도 됩니다.

# branch 삭제
git branch -d a
git branch
```

## 1.2 미션
* main branch를 생성합니다.
* a branch를 생성하고 a.txt 파일을 생성합니다.
* b branch를 생성하고 b.txt 파일을 생성합니다.
* main branch로 이동하여 a branch를 합병합니다.
* main branch로 이동하여 b branch를 합병합니다.
* a branch를 삭제합니다.
* b branch를 삭제합니다.

```shell
cd ..
mkdir mission
cd mission
mkdir test1
cd test1

git init
touch README.md
echo "main" > README.md
git add .
git commit -m '1'

git branch a
git branch b

git checkout a
echo "a" > a.txt

git checkout b
echo "b" > b.txt

git checkout main
git merge a
git merge b

git branch -d a
git branch -d b
```

# 2. 충돌

## 2.1 실습

```shell
mkdir conflict
cd conflict
git init

touch README.md
echo "main" > README.md
git add .
git commit -m '1'

git branch a
git branch b

git checkout a
echo "main a" > README.md
git add .
git commit -m '2'

git checkout b
echo "main b" > README.md
git add .
git commit -m '3'

git checkout main
git merge a
git merge b

# 충돌 발생
# 충돌이 발생되면 branch 이름이 아래와 같이 수정됩니다.
# folder(main)$ => folder(main|MERGING)$
# 충돌이 발생한 파일을 열어서 수정하고 저장합니다.
git add .
git commit -m '4'
# 충돌이 해결되었기 때문에 다시 branch 이름이 folder(main)$로 변경됩니다.

# branch 삭제
git branch -d a
git branch -d b
```

## 2.2 미션
* main branch를 생성합니다.
* a branch를 생성하고 index.html 파일을 '<h1>hello a</h1>'로 생성합니다.
* b branch를 생성하고 index.html 파일을 '<h1>hello b</h1>'로 생성합니다.
* main branch로 이동하여 a branch를 합병합니다.
* main branch로 이동하여 b branch를 합병합니다.
* 충돌이 발생하면 a branch의 내용을 유지합니다.
* a branch를 삭제합니다.
* b branch를 삭제합니다.

```shell
cd ..
mkdir test2
cd test2

git init
touch README.md
echo "main" > README.md
git add .
git commit -m '1'

git branch a
git branch b

git checkout a
echo "<h1>hello a</h1>" > index.html
git add .
git commit -m '2'

git checkout b
echo "<h1>hello b</h1>" > index.html
git add .
git commit -m '3'

git checkout main
git merge a
git merge b

# 충돌 발생
# 충돌이 발생되면 branch 이름이 아래와 같이 수정됩니다.
# folder(main)$ => folder(main|MERGING)$
# 충돌이 발생한 파일을 열어서 수정하고 저장합니다.
git add .
git commit -m '4'
# 충돌이 해결되었기 때문에 다시 branch 이름이 folder(main)$로 변경됩니다.

# branch 삭제
git branch -d a
git branch -d b
```
